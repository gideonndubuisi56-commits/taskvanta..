<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>TaskVanta Dashboard</title>
<link rel="manifest" href="manifest.json">
<meta name="theme-color" content="#22c55e">
<style>
body { font-family: Arial; background:#0f172a; color:#fff; margin:0; }
header { padding:16px; background:#020617; text-align:center; }
.card { background:#020617; margin:16px; padding:16px; border-radius:12px; }
button { padding:10px 14px; border:none; border-radius:8px; background:#22c55e; cursor:pointer; }
a { color:#22c55e; text-decoration:none; }
</style>
</head>
<body>

<header><h2>TaskVanta Dashboard</h2></header>

<div class="card">
  <p><b>User:</b> <span id="user"></span></p>
  <p><b>Balance:</b> â‚¦<span id="bal">0</span></p>
  <button onclick="logout()">Logout</button>
</div>

<div class="card">
  <a href="tasks.html">Go to Tasks</a><br><br>
  <a href="withdraw.html">Withdraw</a><br><br>
  <a href="referral.html">Referrals</a><br><br>
  <a href="admin.html">Admin Panel</a>
</div>

<script>
// Login check
const user = localStorage.getItem('tv_user');
if(!user){
  alert("You must login first!");
  window.location.href = "login.html";
}

document.getElementById('user').textContent = user;
document.getElementById('bal').textContent = localStorage.getItem('tv_bal') || 0;

// Logout
function logout(){
  localStorage.removeItem('tv_user');
  localStorage.removeItem('tv_bal');
  alert("You have been logged out!");
  window.location.href = "login.html";
}

// Register service worker
if('serviceWorker' in navigator){
  navigator.serviceWorker.register('sw.js')
    .then(() => console.log("Service Worker Registered"))
    .catch(err => console.log("SW registration failed:", err));
}
</script>

</body>
</html>
