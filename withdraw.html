<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Withdraw - TaskVanta</title>
<style>
body { font-family: Arial; background:#0f172a; color:#fff; margin:0; padding:20px; }
h2 { text-align:center; }
input, button { padding:10px; margin:10px 0; border-radius:6px; border:none; }
button { background:#22c55e; cursor:pointer; }
</style>
</head>
<body>

<h2>Withdraw Funds</h2>

<p>Your balance: ₦<span id="bal">0</span></p>

<input type="number" id="amount" placeholder="Enter amount to withdraw">
<button onclick="withdraw()">Withdraw</button>

<script>
const user = localStorage.getItem('tv_user');
if(!user){ alert("Login first!"); window.location.href="login.html"; }

document.getElementById('bal').textContent = localStorage.getItem(user+'_bal') || 0;

function withdraw(){
  let bal = parseInt(localStorage.getItem(user+'_bal') || 0);
  const amt = parseInt(document.getElementById('amount').value);
  if(!amt || amt <= 0){ alert("Enter a valid amount!"); return; }
  if(amt > bal){ alert("Insufficient balance!"); return; }
  bal -= amt;
  localStorage.setItem(user+'_bal', bal);
  localStorage.setItem('tv_bal', bal);
  alert(`Withdrawal of ₦${amt} successful! New balance: ₦${bal}`);
  document.getElementById('bal').textContent = bal;
}
</script>

</body>
</html>
